<ion-view view-title="Formulario Inspecciones">

<ion-content>

	<div class="row">

		<div class="col col-20">
			<div class="list card">
				<div class="item item-divider">Fecha</div>
				<ionic-datepicker input-obj="datepickerObject" ng-model="createRiesgo.datepickerObject.inputDate">
				  <button class="button button-block button-positive"> {{createRiesgo.datepickerObject.inputDate | date:'dd - MMMM - yyyy'}}</button>
				</ionic-datepicker>
		  	<div class="list">
					<label class="item item-input item-select">
						<span class="input-label">Labor</span>
						<select class="form-control" ng-model="createRiesgo.labor" ng-change="createRiesgo.cargarTipo()"
   					ng-options="c.codigo for c in createRiesgo.labores ">
    				</select>
					</label>
					<label class="item item-input">
						<span class="input-label">Nivel</span>
				  	<input type="text" ng-model="createRiesgo.labor.nivel" disabled>
					</label>
		  	</div>
			</div>
			<div class="list card stable-bg">
				<div class="item item-divider">Guardia</div>
				<ion-radio ng-repeat="item in createRiesgo.guardia"
			    ng-value="item.value"
			    ng-model="createRiesgo.insp_guard.guardia" name="group_guardia">
			    {{ item.text }}
				</ion-radio>
			</div>
		</div>

    <div class="col col-60">
		<div class="list card stable-bg">
			<div class="row">
				<div class="item item-input">
					<span class="input-label">Empresa:</span>
					{{createRiesgo.labor.empresa.nombre}}
				</div>
			</div>
		</div>
		<div class="list card stable-bg">
		    <div class="row">
		    	<div class="col col-10">
			  		<label class="item item-input item-stacked-label">
				    	<span class="input-label">Medidas</span>
							<h2>Ancho</h2>
				  	</label>
			  	</div>
		  		<div class="col">
			  		<label class="item item-input item-stacked-label">
				    	<span class="input-label">Programado</span>
				  		<input type="number" ng-model="createRiesgo.labor.ancho_pro" disabled>
				  	</label>
			  	</div>
		  		<div class="col">
				  		<label class="item item-input item-stacked-label">
				    	<span class="input-label">Real</span>
				    	<input type="number" ng-model="createRiesgo.ancho_real"  ng-change="createRiesgo.calcularPorAncho()">
				  	</label>
			  	</div>
			   	<div class="col">
			  		<label class="item item-input item-stacked-label">
				    	<span class="input-label">% Sobre Exc.-Tabla</span>
				    	<input type="number" ng-model="createRiesgo.porcentaje_tabla" disabled>
				  	</label>
			  	</div>
			  	<div class="col">
			  		<label class="item item-input item-stacked-label">
				    	<span class="input-label">% Sobre Exc.-Real</span>
				    	<input type="number" ng-model="createRiesgo.ancho_exc_real" disabled>
				  	</label>
			  	</div>
			</div>
			<div class="row">
		  		<div class="col col-10">
					<div class="list">
						<label class="item item-input">
					    <h2>Alto</h2>
					  </label>
					</div>
		  		</div>
		  		<div class="col">
					<div class="list">
						<label class="item item-input item-stacked-label">
					    <input type="number" ng-model="createRiesgo.labor.alto_pro" disabled>
					  	</label>
					</div>
		  		</div>
		  		<div class="col">
					<div class="list">
						<label class="item item-input item-stacked-label">
					    <input type="number" ng-model="createRiesgo.alto_real" ng-change="createRiesgo.calcularPorAlto()">
					  	</label>
					</div>
		  		</div>
		  		<div class="col">
					<div class="list">
						<label class="item item-input item-stacked-label">
					    <input type="number" ng-model="createRiesgo.porcentaje_tabla" disabled>
					  	</label>
					</div>
		  		</div>
		  		<div class="col">
					<div class="list">
						<label class="item item-input item-stacked-label">
					    <input type="number" ng-model="createRiesgo.alto_exc_real" disabled>
				  	</label>
					</div>
		  		</div>
		  	</div>
		</div>
		<div class="list card stable-bg">
	  	<div class="row">
				<div class="col">
					<label class="item item-input">
						<span class="input-label">Tipo de labor</span>
				    <input type="text" ng-model="createRiesgo.labor.tipo.nombre" ng-click="createRiesgo.openTablaSostenimiento()">
			  	</label>
				</div>
    		<div class="col">
		    	<label class="item item-input">
						<span class="input-label">GSI</span>
						<select disabled ng-model="createRiesgo.tipo_roca" ng-options="roca.rocaid as roca.codigo for roca in createRiesgo.rocas">
						</select>
		    	</label>
	    	</div>
	    </div>
			<div class="row">
				<div class="col">
		    	<label class="item item-input">
						<span class="input-label">Sostenimiento</span>
						<select disabled ng-model="createRiesgo.tipo_sostenimiento"
						ng-options="sost.sostenimientoid as sost.descripcion for sost in createRiesgo.sostenimientos">
						</select>
		    	</label>
	    	</div>
			</div>
	  	<div class="row">
	    	<div class="col ">
		    	<label class="item item-input item-stacked-label">
	    			<span class="input-label">Recomendaci칩n Geomec치nica</span>
	    			<textarea name="comment" id="comment-textarea"  ng-model="createRiesgo.comment">
					</textarea>
	  			</label>
	    	</div>
	    </div>
		</div>

		<div class="list card">
		    <div class="row">
				<div class="col " >
				    <label class="item item-input item-select">
						<div class="input-label">
							Responsable de:
						</div>
						<select class="form-control" ng-model="createRiesgo.responsable"
		         				 ng-options="c.nombre for c in createRiesgo.usuarios ">
		        		</select>
					</label>

				    <label class="item item-input item-select">
					    <div class="input-label">
					    	Seguridad
					    </div>
					    <select class="form-control" ng-model="createRiesgo.seguridad"
	         				 ng-options="c.nombre for c in createRiesgo.usuarios ">
	        			</select>
					</label>
				</div>
				<div class="col">
				    <label class="item item-input item-select">
					    <div class="input-label">
					    	Geomecanico
					    </div>
					  	<select class="form-control" ng-model="createRiesgo.geomecanico"
	         				 ng-options="c.nombre for c in createRiesgo.usuarios ">
	        			</select>
					</label>

				    <label class="item item-input item-select">
					    <div class="input-label">
					    	 Operaciones
					    </div>
					    <select class="form-control" ng-model="createRiesgo.operaciones"
	         				ng-options="c.nombre for c in createRiesgo.usuarios ">
	        			</select>
					</label>
				</div>
			</div>
		</div>


    </div>

    <div class="col col-20">
		<div class="list card">
			<div class="item item-divider" ng-class="{'pending-delete': createRiesgo.slark==='C'}">Labor con sostenimiento</div>
			<ion-radio ng-disabled="createRiesgo.slark==='C'" ng-repeat="item in createRiesgo.opcionlabor"
				    ng-value="item.value"
				    ng-change="createRiesgo.calculariesgo(item)"
				    ng-model="createRiesgo.inps_OL.sostenimiento"
				    name="group_opcionlabor">
				          {{ item.text }}
			</ion-radio>
		</div>

		<div class="list card" >
		   	<div class="item item-divider" ng-class="{'pending-delete': createRiesgo.slark==='C'}">Recomendacion Geomec치nica</div>
	   		<ion-radio  ng-disabled="createRiesgo.slark==='C'" ng-repeat="item in createRiesgo.geomecanica"
				    ng-value="item.value"
				    ng-change="createRiesgo.calculariesgo(item)"
				    ng-model="createRiesgo.insp_recomendacion.rgeo" name="group_recomendacion">
				          {{ item.text }}
				</ion-radio>
		</div>

		<div class="list card">
		   	<div class="item item-divider">Instalaci칩n</div>
		   		<ion-radio ng-disabled="createRiesgo.slark==='C'" ng-repeat="item in createRiesgo.install"
				    ng-value="item.value"
				    ng-change="createRiesgo.calculariesgo(item)"
				    ng-model="createRiesgo.insp_install.resp" name="group_inst">
				          {{ item.text }}
				</ion-radio>
		</div>

		<div class="list card">
			<div class="item item-divider">Nivel de Riesgo</div>
				 <div class="item item-body">
				    <div>
				        <input type="text" ng-model="createRiesgo.nivelRiesgo">
				    </div>
				</div>
			</div>
		</div>
</div>



<div class="card card-gallery item">
	<div class="row responsive-md responsive-sm">
		<div class="col col-50">
			<div ng-repeat="pregunta in createRiesgo.preguntasList | filter: {columna: 'left'}">
				<ion-item ng-if="pregunta.tipo === 'Opciones'">
	        <label class="item item-input item-select">
	          <span class="input-label">{{pregunta.posicion + 1}} .- {{pregunta.descripcion}}</span>
	          <select class="form-control" ng-model="createRiesgo.respuestas[pregunta.preguntaid]"
	             ng-options="c.value as c.nombre for c in pregunta.alternativas"
	             ng-change="createRiesgo.calculariesgo(); createRiesgo.habilitarPreguntas()"
							 ng-disabled="pregunta.isDisabled">
	          </select>
	        </label>
	      </ion-item>
	      <ion-toggle ng-if="pregunta.tipo === 'Check'" ng-model="createRiesgo.respuestas[pregunta.preguntaid]"
	      ng-true-value="true" ng-false-value="false"  ng-change="createRiesgo.calculariesgo(); createRiesgo.habilitarPreguntas()"
				ng-disabled="pregunta.isDisabled">
	        <span class="input-label">{{pregunta.posicion + 1}} .- {{ pregunta.descripcion }}</span>
	      </ion-toggle>
	      <ion-item ng-if="pregunta.tipo === 'Compuesto'">
	        <label class="item item-input">
	          <span class="input-label">{{pregunta.posicion + 1}} .- {{pregunta.descripcion}}</span>
	        </label>
	      </ion-item>
			</div>
		</div>
		<div class="col col-50">
			<div ng-repeat="pregunta in createRiesgo.preguntasList | filter: {columna: 'right'}">
				<ion-item ng-if="pregunta.tipo === 'Opciones'">
	        <label class="item item-input item-select">
	          <span class="input-label">{{pregunta.posicion + 1}} .- {{pregunta.descripcion}}</span>
	          <select class="form-control" ng-model="createRiesgo.respuestas[pregunta.preguntaid]"
	             ng-options="c.value as c.nombre for c in pregunta.alternativas"
	             ng-change="createRiesgo.calculariesgo()"
							 ng-disabled="pregunta.isDisabled">
	          </select>
	        </label>
	      </ion-item>
	      <ion-toggle ng-if="pregunta.tipo === 'Check'" ng-model="createRiesgo.respuestas[pregunta.preguntaid]"
	      ng-true-value="true" ng-false-value="false"  ng-change="createRiesgo.calculariesgo()"
				ng-disabled="pregunta.isDisabled">
	        <span class="input-label">{{pregunta.posicion + 1}} .- {{ pregunta.descripcion }}</span>
	      </ion-toggle>
	      <ion-item ng-if="pregunta.tipo === 'Compuesto'">
	        <label class="item item-input">
	          <span class="input-label">{{pregunta.posicion + 1}} .- {{pregunta.descripcion}}</span>
	        </label>
	      </ion-item>
			</div>
		</div>
	</div>
</div>


	<div class="row">
    	<div class="col col-20">
			<button class="button button-balanced"  ng-click="createRiesgo.guardarinspeccion()">
			  Registrar
			</button>
		</div>
	</div>

	<div>
	</div>



  <!-- <multi-select-date name="birthdate" ng-model="user.birthdate" year-order="desc" start-year="1980" end-year="2050" required>aqujjjjjjjjjjjjjjjjjjjjjjjjjjjji</multi-select-date> -->


  <script type="text/ng-template" id="multiSelectDate">
	  // <div class="row">

	  //   <div class="col-xs-3">
	  //     Month
	  //     <select ng-model="date.month" ng-options="month for month in selects.months()" class="form-control">
	  //       <option value="" disabled>--</option>
	  //     </select>
	  //   </div>

	  //   <div class="col-xs-3">
	  //     Day
	  //     <select ng-model="date.day" ng-options="day for day in selects.days()" class="form-control">
	  //       <option value="" disabled>--</option>
	  //     </select>
	  //   </div>

	  //   <div class="col-xs-6">
	  //     Year
	  //     <select ng-model="date.year" ng-options="year for year in selects.years() | orderBy: year:yearOrder" class="form-control">
	  //       <option value="" disabled>----</option>
	  //     </select>
	  //   </div>

	  // </div>
  </script>

  </ion-content>
</ion-view>



<script id="popupSostenimiento.html" type="text/ng-template">
  <div class="modal" style="height: 620px; top: 5%;">
    <ion-content>
			<canvas id="canvas" width="800" height="600" tb-sostenimiento
			sostenimientos="createRiesgo.sostenimientos"
      rocas="createRiesgo.rocas"
      tiporoca="createRiesgo.tipo_roca"
      tiposostenimiento="createRiesgo.tipo_sostenimiento"
			porcentaje="createRiesgo.porcentaje_tabla"
			close="createRiesgo.closeTablaSostenimiento()">
			Utilice un navegador que soporte canvas para visualizar la tabla de sostenimiento.
			</canvas>
    </ion-content>
  </div>
</script>

<style type="text/css">
.ng-delete { background-color: pink }
</style>
