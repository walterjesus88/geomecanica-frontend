<ion-view title="Users">
  <!--div class="bar bar-header bar-positive">
    <h1 class="title">Gestionar Usuarios</h1>
  </div-->
  <ion-content padding="'true'" class="has-header">
    <div class="list list-inset">
      <label class="item item-input">
        <i class="icon ion-search placeholder-icon"></i>
        <input type="text" placeholder="Buscar" ng-model="users.filtro">
      </label>
    </div>
    <div class="list">
      <div class="item item-avatar" ng-repeat="usuario in users.usuarios | filter:users.filtro track by $index">
        <h2>{{usuario.nombre}}</h2>
        <p>
          {{usuario.rol.nombre_rol}}
        </p>
        <p>
          {{usuario.correo}}
        </p>
        <p>
          {{usuario.estado}}
        </p>
        <button class="button button-energized button-outline button-small"
        ng-click="users.openModal(usuario)">Editar</button>
        <button class="button button-assertive button-outline button-small"
        ng-if="usuario.estado === 'Activo'"
        ng-click="users.darBaja(usuario)">Dar de Baja</button>
        <button class="button button-positive button-outline button-small"
        ng-if="usuario.estado !== 'Activo'"
        ng-click="users.darAlta(usuario)">Dar de Alta</button>
        <button class="button button-stable button-outline button-small"
        ng-click="users.eliminarUsuario(usuario.uid)">Eliminar</button>
      </div>
    </div>
  </ion-content>
</ion-view>

<script id="edit-user-modal.html" type="text/ng-template">
  <div class="modal">
    <ion-header-bar class="bar bar-header bar-positive">
      <h1 class="title">Editar Usuario</h1>
    </ion-header-bar>
    <ion-content>
      <div class="list padding">
        <div class="spacer" style="height: 20px;"></div>
        <p>
          Edite los datos personales del usuario.
        </p>
        <label class="item item-input item-stacked-label ">
          <span class="input-label">Nombre</span>
          <input type="text" ng-model="users.editUser.nombre">
        </label>
        <div class="spacer" style="height: 20px;"></div>
        <label class="item item-input item-stacked-label ">
          <span class="input-label">Documento</span>
          <input type="text" ng-model="users.editUser.dni">
        </label>
        <div class="spacer" style="height: 20px;"></div>
        <p>
          Cambie el rol que tiene el usuario.
        </p>
        <label class="item item-input item-select">
            <span class="input-label">Rol</span>
            <select ng-model="users.editUser.rolRolId"
            ng-options="rol.rol_id as rol.nombre_rol for rol in users.roles">
            </select>
        </label>
        <div class="spacer" style="height: 20px;"></div>
        <p>
          Cambie el correo de contacto.
        </p>
        <label class="item item-input item-stacked-label ">
          <span class="input-label">Correo</span>
          <input type="text" ng-model="users.editUser.correo">
        </label>
      </div>
      <div class="spacer" style="height: 20px;"></div>
      <div class="row">
        <div class="col">

        </div>
        <div class="col">
          <button class="button button-calm button-block" ng-click="users.closeModal()">Guardar</button>
          <button class="button button-stable button-block" ng-click="users.cancelModal()">Cancelar</button>
        </div>
        <div class="col">

        </div>
      </div>
    </ion-content>
  </div>
</script>
